<div class="container">
  <h4>Saisie</h4>

  <form (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-3 text-center">
        <div class="form-group">
          <label for="dateSaisie">Date</label>
          <input type="text" class="form-control" #dp="bsDatepicker" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
            name="dateSaisie" id="dateSaisie" [(ngModel)]="dateSaisie" />
        </div>
      </div>
    </div>

    <div class="row enfant-row" *ngFor="let enfant of enfants">
      <div class="col-2 toggle-enfant text-center" (click)="toggleEnfant(enfant)"
        title="Activer/Désactiver la saisie"
        [ngClass]="{'bg-primary text-white': model[enfant.id].saisie, 'bg-light text-dark': !model[enfant.id].saisie}">
        <span class="align-middle">{{enfant.nom}}</span>
        <span class="toggle-enfant-check align-middle" *ngIf="model[enfant.id].saisie">☑</span>
        <span class="toggle-enfant-check align-middle" *ngIf="!model[enfant.id].saisie">☒</span>
      </div>
      <div class="col">
        <div class="row">
          <div class="col">
            <div class="form-group">
              <span>Arrivée</span>
              <timepicker name="'heurearrivee_' + {{enfant.id}}" [(ngModel)]="model[enfant.id].heureArrivee"></timepicker>
            </div>
          </div>
          <div class="col">
            <p>Déjeuner</p>
            <div class="form-group form-check-inline">
              <div class="form-check" *ngFor="let dej of inputNbDejeuner">
                <label class="radio-container"><span class="radio-lib">{{dej}}</span>
                  <input type="radio" [value]="dej" checked="checked" id="nbDejeuner_{{enfant.id}}" name="nbDejeuner_{{enfant.id}}"
                    [(ngModel)]="model[enfant.id].nbDejeuner" />
                </label>
              </div>
            </div>
          </div>
          <div class="col">
            <p>AR école</p>
            <div class="form-group form-check-inline">
              <div class="form-check" *ngFor="let ecole of inputNbAREcole">
                <label class="radio-container"><span class="radio-lib">{{ecole}}</span>
                  <input type="radio" [value]="ecole" checked="checked" id="nbArEcole_{{enfant.id}}" name="nbArEcole_{{enfant.id}}"
                    [(ngModel)]="model[enfant.id].nbArEcole" />
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="row">

          <div class="col">
            <div class="form-group">
              <span>Départ</span>
              <timepicker name="'heuredepart_' + {{enfant.id}}" [(ngModel)]="model[enfant.id].heureDepart"></timepicker>
            </div>
          </div>

          <div class="col">
            <p>Goûter</p>
            <div class="form-group form-check-inline">
              <div class="form-check" *ngFor="let gouter of inputNbGouters">
                <label class="radio-container"><span class="radio-lib">{{gouter}}</span>
                  <input type="radio" [value]="gouter" checked="checked" id="nbGouter_{{enfant.id}}" name="nbGouter_{{enfant.id}}"
                    [(ngModel)]="model[enfant.id].nbGouter" />
                </label>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="'autreKm_' + {{enfant.id}}">Autres déplacements</label>
              <input type="text" class="form-control" name="'autreKm_' + {{enfant.id}}" [(ngModel)]="model[enfant.id].autreKm" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <button type="submit" class="btn btn-success btn-lg">Valider <i class="fa fa-spinner fa-spin fa-fw" *ngIf="loading"></i></button>
      </div>
    </div>
  </form>
</div>
